begin
SET active TO true;

do;
    if W1 then;
        I4
        SET active TO false;
    else;
        I1
        if not W2 then;
            I2
            SET active TO false;
        else;
            I3
        fi
    fi
while active then;
od

end
